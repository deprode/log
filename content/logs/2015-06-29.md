+++
Categories = ["log"]
Description = ""
Tags = ["noiz"]
Title = "2015 06 29"
date = "2015-06-29T17:38:56+09:00"
+++

* （自分で作った）罠
	* Time Machineのバックアップ先にHDDを選んでいる。結構前に買ったHDDで、容量は320GBだ。
	* 一年ほど前に、「これ以上はバックアップできないので古いバックアップを消していく」と警告が出た。よく見るとバックアップには仮想マシンのデータが含まれており、それだけで数GBだった。バックアップ回数を重ねるにつれ、すぐ容量がいっぱいになってしまったらしい。
	* 幸い、Time Machineにはファイルやフォルダを除外する機能がある。なので、仮想マシンのフォルダごと指定し、仮想マシン自体は手動でバックアップをとることにした。
	* 三ヶ月ほど前、仕事が一段落ついたのでフォルダを整理した。その際、いくつかの使っていないファイルを削除し、容量を削減した。
	* そして今日、仮想マシンが立ち上がらない。おかしい。何もしてないのに壊れた。
	* 原因はいくつかあるが、まず仮想マシンの設定ファイルであるVagrantFileが以前と違っていることに気づいた。ファイル同期に使うrsync関連の処理が書いてなかったのだ。
	* ということは、何らかのミスによりVagrantFile、もしくはフォルダごと捨ててしまった可能性がある。
	* Time Machineで復元すれば問題ないが、バックアップ対象から外れていたため、復元できなかった。また、ゴミ箱から復元するソフトを使ってみたが、復元はできなかった。
	* とにかくまずいことになったと思った。復元できないし、バックアップもとってない。ということは、作り直すしかない。
	* というわけで、作り直した。といっても、元のファイルを全く覚えてないので、必要最低限の機能だけ作り直した。（元のファイルにはprovisioin関係の記述もあった。）
	* 今後はこのようなことがあっても大丈夫なように、作ったファイルはBitbucketあたりにリポジトリ作ってアップロードしておきたい。